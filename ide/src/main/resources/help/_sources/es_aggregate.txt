------------
es_aggregate
------------

**es_aggregate (**\ *<string,void>* **index*,** *<string,void>* **type*,** *<list,string>* **aggregations,** *string* **client*)**

Description
-----------

Searches a cluster ``client``, with optionally an ``index`` or ``type`` for documents and applies the ``aggregations`` on the documents. You may specify either a list of aggregations or a single aggregation as a string. 
``index`` and ``type`` are optional, but if you pass a type, you also have to pass an index. Make sure to pass the top-level aggregation as parameter (and not a child).

See also :doc:`es_filteragg`, :doc:`es_statsagg`

Examples
--------

-

	Getting statistics for the "price" field of all documents in the "literature" index:
	
	::
		
		es_connect();
		stats = es_statsagg("stats", "price");
		results = es_aggregate("literature", null, stats);
		log(results);
	
	might print:
	
	::
		
		{
			stats = {
				min = 10,
				avg = 36.25,
				max = 70,
				count = 4,
				sum = 145
			}
		}

Tags
----

:doc:`_tag_elasticsearch`